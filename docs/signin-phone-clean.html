<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Sign In</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    /* SIMPLE DARK THEME - CLEAN START */
    * {
      box-sizing: border-box;
    }
    
    html, body {
      background: linear-gradient(135deg, #0b0f1a 0%, #0f172a 40%, #0f1c33 100%) !important;
      background-color: #0b0f1a !important;
      margin: 0 !important;
      padding: 0 !important;
      min-height: 100vh !important;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;
    }
    
    /* Force all containers to dark background */
    .ext-container, .ext-container-margin, .ext-container-padding,
    .ext-container .ext-container-margin, .ext-container .ext-container-padding,
    .ext-container .ext-container-margin .ext-container-padding,
    [class*="ext-"], [id*="ext-"], [class*="container"], [id*="container"] {
      background: linear-gradient(135deg, #0b0f1a 0%, #0f172a 40%, #0f1c33 100%) !important;
      background-color: #0b0f1a !important;
    }
    
    /* API Container - Professional and compact */
    #api {
      background: rgba(17, 25, 40, 0.85) !important;
      backdrop-filter: blur(20px) !important;
      border: 1px solid rgba(148, 163, 184, 0.2) !important;
      border-radius: 16px !important;
      box-shadow: 0 20px 40px rgba(15, 23, 42, 0.4) !important;
      padding: 2rem !important;
      max-width: 400px !important;
      margin: 2rem auto !important;
      min-height: auto !important;
      max-height: 85vh !important;
      overflow: visible !important;
    }

    /* CSS-ONLY LOGO: pseudo-element so it survives DOM replacement */
    #api::before {
      content: "" !important;
      display: block !important;
      width: 64px !important;
      height: 64px !important;
      margin: 0 auto 1.25rem auto !important;
      background-image: url('https://creative-aigent.github.io/B2CAssets/icon-512.png') !important;
      background-repeat: no-repeat !important;
      background-position: center center !important;
      background-size: contain !important;
      border-radius: 12px !important;
      pointer-events: none !important;
      filter: brightness(0) invert(1) !important;
      opacity: 0.98 !important;
    }
    
    /* Form elements - Professional styling */
    #api input[type="text"],
    #api input[type="tel"],
    #api input[type="email"],
    #api input[type="password"],
    #api select {
      background: rgba(15, 23, 42, 0.55) !important;
      border: 1px solid rgba(148, 163, 184, 0.28) !important;
      border-radius: 12px !important;
      color: #f1f5f9 !important;
      padding: 1rem 1.25rem !important;
      font-size: 0.95rem !important;
      width: 100% !important;
      margin-bottom: 0 !important;
      transition: border-color 0.2s ease, box-shadow 0.2s ease, background-color 0.2s ease !important;
      font-weight: 400 !important;
      box-sizing: border-box !important;
    }

    #api input:focus, #api select:focus {
      outline: none !important;
      border: 1px solid rgba(129, 140, 248, 0.68) !important;
      box-shadow: 0 0 0 3px rgba(129, 140, 248, 0.28) !important;
      background: rgba(15, 23, 42, 0.72) !important;
    }

    #api input::placeholder, #api select::placeholder {
      color: rgba(203, 213, 225, 0.65) !important;
    }
    
    /* Form labels - Professional styling */
    #api label {
      display: block !important;
      margin-bottom: 0.5rem !important;
      font-weight: 600 !important;
      color: #e2e8f0 !important;
      font-size: 0.9rem !important;
      letter-spacing: 0 !important;
      text-transform: none !important;
      line-height: 1.3 !important;
    }
    
    /* Remove bullet points from labels */
    #api label::before {
      content: "" !important;
    }
    
    /* Ensure proper spacing between form groups */
    #api .form-group, #api .form-item, #api .form-section {
      margin-bottom: 1.25rem !important;
    }
    
    /* Align form elements consistently */
    #api .form-group {
      display: flex !important;
      flex-direction: column !important;
      align-items: stretch !important;
    }

    /* Checkbox styling - Inline with label */
    #api input[type="checkbox"] {
      width: 16px !important;
      height: 16px !important;
      margin: 0 !important;
      margin-right: 0.55rem !important;
      accent-color: #6366f1 !important;
      display: inline-block !important;
      vertical-align: middle !important;
      border: 1px solid rgba(148, 163, 184, 0.35) !important;
      border-radius: 4px !important;
      background: rgba(15, 23, 42, 0.45) !important;
    }
    
    /* Checkbox label - Inline styling */
    #api label[for*="checkbox"], #api label:has(input[type="checkbox"]) {
      display: inline-flex !important;
      align-items: center !important;
      margin-bottom: 0 !important;
      font-size: 0.88rem !important;
      text-transform: none !important;
      letter-spacing: normal !important;
      cursor: pointer !important;
      font-weight: 500 !important;
      line-height: 1.2 !important;
    }

    #api label[for*="checkbox"]::before, #api label:has(input[type="checkbox"])::before {
      content: "" !important;
    }

    /* Checkbox container - Ensure proper alignment */
    #api .checkbox-container, #api .form-group:has(input[type="checkbox"]) {
      display: grid !important;
      grid-template-columns: auto 1fr !important;
      align-items: start !important;
      column-gap: 0.55rem !important;
      margin-bottom: 1rem !important;
    }

    #api .form-group:has(input[type="checkbox"]) label {
      margin: 0 !important;
      line-height: 1.3 !important;
    }
    
    /* Form groups and sections - Compact spacing */
    #api .form-group, #api .form-item {
      margin-bottom: 1rem !important;
    }

    #api .form-section {
      margin-bottom: 1.25rem !important;
      padding-bottom: 0.75rem !important;
      border-bottom: 1px solid rgba(148, 163, 184, 0.12) !important;
    }
    
    #api .form-section:last-child {
      border-bottom: none !important;
      margin-bottom: 0 !important;
    }
    
    /* Compact spacing for links */
    #api .link-section {
      text-align: center !important;
      margin-top: 1.25rem !important;
      padding-top: 1rem !important;
      border-top: 1px solid rgba(148, 163, 184, 0.12) !important;
    }

    #api .link-section a {
      display: inline-block !important;
      margin: 0 0.75rem !important;
      font-weight: 500 !important;
      color: #93c5fd !important;
      opacity: 0.95 !important;
      transition: color 0.2s ease, opacity 0.2s ease !important;
    }

    #api .divider,
    #api .or,
    #api .separator,
    #api span[id*="divider"],
    #api span[id*="or"] {
      display: block !important;
      margin: 1.25rem 0 1rem !important;
      font-size: 0.82rem !important;
      font-weight: 600 !important;
      letter-spacing: 2px !important;
      text-transform: uppercase !important;
      color: rgba(148, 163, 184, 0.75) !important;
    }
    
    /* Section titles */
    #api h2, #api h3 {
      color: #ffffff !important;
      font-size: 1.1rem !important;
      font-weight: 600 !important;
      margin-bottom: 1rem !important;
      margin-top: 0 !important;
    }
    
    /* Buttons - Professional styling */
    #api button, #api input[type="submit"] {
      background: linear-gradient(135deg, #6366f1 0%, #7c6cf7 100%) !important;
      border: 1px solid rgba(129, 140, 248, 0.7) !important;
      border-radius: 12px !important;
      color: #f8fafc !important;
      padding: 1rem 1.5rem !important;
      font-size: 1rem !important;
      font-weight: 600 !important;
      width: 100% !important;
      cursor: pointer !important;
      margin-top: 1.5rem !important;
      margin-bottom: 1rem !important;
      box-shadow: 0 6px 14px rgba(76, 81, 191, 0.25) !important;
      transition: background 0.2s ease, box-shadow 0.2s ease !important;
      letter-spacing: 0.2px !important;
      text-transform: none !important;
      box-sizing: border-box !important;
    }

    #api button:hover, #api input[type="submit"]:hover {
      background: linear-gradient(135deg, #6f79f8 0%, #8f7cfd 100%) !important;
      box-shadow: 0 8px 18px rgba(76, 81, 191, 0.32) !important;
    }

    #api button:active, #api input[type="submit"]:active {
      box-shadow: 0 4px 12px rgba(76, 81, 191, 0.28) !important;
    }

    #api button:focus-visible, #api input[type="submit"]:focus-visible {
      outline: none !important;
      box-shadow: 0 0 0 3px rgba(129, 140, 248, 0.32) !important;
    }
    
    /* Secondary button */
    #api .secondary-button {
      background: rgba(30, 41, 59, 0.6) !important;
      border: 1px solid rgba(148, 163, 184, 0.22) !important;
      color: #e2e8f0 !important;
    }

    #api .secondary-button:hover {
      background: rgba(51, 65, 85, 0.7) !important;
    }
    
    /* Text elements - Professional typography */
    #api p, #api div, #api h1, #api h2, #api h3 {
      color: #f8fafc !important;
      line-height: 1.55 !important;
    }

    #api h1 {
      font-size: 1.6rem !important;
      font-weight: 600 !important;
      margin-bottom: 0.35rem !important;
      letter-spacing: -0.15px !important;
    }

    #api h2 {
      font-size: 1.05rem !important;
      font-weight: 500 !important;
      margin-bottom: 0.65rem !important;
      letter-spacing: -0.15px !important;
    }

    #api p {
      font-size: 0.92rem !important;
      font-weight: 400 !important;
      margin-bottom: 1.1rem !important;
      opacity: 0.85 !important;
    }
    
    #api a {
      color: #93c5fd !important;
      text-decoration: none !important;
      transition: color 0.2s ease !important;
    }

    #api a:hover {
      color: #a855f7 !important;
      text-decoration: none !important;
    }
    
    /* Logo styling - Compact and clean */
    .logo-container {
      text-align: center !important;
      margin-bottom: 1.5rem !important;
      padding: 0.4rem 0 !important;
    }

    .logo-icon {
      width: 64px !important;
      height: 64px !important;
      object-fit: contain !important;
      border-radius: 12px !important;
      /* Make logo white */
      box-shadow: 0 12px 26px rgba(15, 23, 42, 0.25) !important;
      transition: transform 0.2s ease, box-shadow 0.2s ease !important;
    }

    .logo-icon:hover {
      transform: scale(1.02) !important;
      box-shadow: 0 14px 30px rgba(15, 23, 42, 0.3) !important;
    }
    
    /* NUCLEAR "What is this?" link removal */
    #api a[href*="what"], #api a[href*="help"], #api a[href*="info"],
    #api .help-link, #api .info-link, #api .what-is-this,
    #api a[href*="learn"], #api a[href*="support"],
    #api a[href*="help"], #api a[href*="info"], #api a[href*="what"],
    #api .help-text, #api .info-text, #api .what-is-this-text,
    #api a[href*="help"], #api a[href*="info"], #api a[href*="what"],
    #api .help-link, #api .info-link, #api .what-is-this-link,
    #api a[href*="help"], #api a[href*="info"], #api a[href*="what"],
    #api .help-link, #api .info-link, #api .what-is-this,
    #api a[href*="learn"], #api a[href*="support"],
    #api a[href*="help"], #api a[href*="info"], #api a[href*="what"],
    #api .help-text, #api .info-text, #api .what-is-this-text,
    #api a[href*="help"], #api a[href*="info"], #api a[href*="what"],
    #api .help-link, #api .info-link, #api .what-is-this-link,
    #api a[href*="help"], #api a[href*="info"], #api a[href*="what"],
    #api .help-link, #api .info-link, #api .what-is-this,
    #api a[href*="learn"], #api a[href*="support"],
    #api a[href*="help"], #api a[href*="info"], #api a[href*="what"],
    #api .help-text, #api .info-text, #api .what-is-this-text,
    #api a[href*="help"], #api a[href*="info"], #api a[href*="what"],
    #api .help-link, #api .info-link, #api .what-is-this-link {
      display: none !important;
      visibility: hidden !important;
      width: 0 !important;
      height: 0 !important;
      overflow: hidden !important;
      position: absolute !important;
      left: -9999px !important;
      opacity: 0 !important;
      pointer-events: none !important;
      z-index: -9999 !important;
    }
    
    /* Target any remaining help links with more specific selectors */
    #api a[href*="what"], #api a[href*="help"], #api a[href*="info"],
    #api .help-link, #api .info-link, #api .what-is-this,
    #api a[href*="learn"], #api a[href*="support"],
    #api a[href*="help"], #api a[href*="info"], #api a[href*="what"],
    #api .help-text, #api .info-text, #api .what-is-this-text,
    #api a[href*="help"], #api a[href*="info"], #api a[href*="what"],
    #api .help-link, #api .info-link, #api .what-is-this-link {
      display: none !important;
      visibility: hidden !important;
      width: 0 !important;
      height: 0 !important;
      overflow: hidden !important;
      position: absolute !important;
      left: -9999px !important;
      opacity: 0 !important;
      pointer-events: none !important;
      z-index: -9999 !important;
    }
    
    /* Hide any floating help links */
    #api .help-link, #api .info-link, #api .what-is-this {
      display: none !important;
    }
    
    /* Ensure form doesn't truncate */
    #api {
      overflow: visible !important;
      max-height: none !important;
    }
    
    /* Remove redundant country field if it appears */
    #api input[name*="country"], #api select[name*="country"] {
      display: none !important;
    }
    
    /* Hide the first country field (redundant) */
    #api .form-group:first-child,
    #api .form-group:first-child input,
    #api .form-group:first-child select,
    #api .form-group:first-child label {
      display: none !important;
    }
    
    /* Ensure all form elements are visible */
    #api * {
      max-height: none !important;
      overflow: visible !important;
    }
    
    /* Remove any unwanted bullet points or list styling */
    #api ul, #api ol, #api li {
      list-style: none !important;
      margin: 0 !important;
      padding: 0 !important;
    }
    
    #api li::before, #api li::after {
      content: "" !important;
    }
    
    /* Ensure proper form field alignment */
    #api .form-group label + input,
    #api .form-group label + select {
      margin-top: 0.5rem !important;
    }
    
    /* Remove any default margins from form elements */
    #api input, #api select, #api button {
      margin-left: 0 !important;
      margin-right: 0 !important;
    }
    
    /* Ensure consistent spacing */
    #api .form-group:not(:last-child) {
      margin-bottom: 1.5rem !important;
    }
  
  </style>
</head>
<body>
  <!-- B2C Required API Container -->
  <div id="api"></div>

  <script>
    const HELP_SELECTORS = [
      'a[href*="what"]',
      'a[href*="help"]',
      'a[href*="info"]',
      'a[href*="learn"]',
      'a[href*="support"]',
      '.help-link',
      '.info-link',
      '.what-is-this',
      '.help-text',
      '.info-text',
      '.what-is-this-text',
      '.what-is-this-link'
    ];

    const HELP_PARENT_SELECTORS = [
      '.form-group .helpLink',
      '.form-group .helpText',
      '.form-group a[href*="what"]',
      '.form-group a[href*="help"]',
      '.form-group a[href*="info"]',
      '.intro .helpLink',
      '.intro .helpText',
      '.intro a[href*="what"]',
      '.intro a[href*="help"]',
      '.intro a[href*="info"]'
    ];

    const DEFAULT_HELP_TEXT_PATTERNS = [
      /what\s+is\s+this\??/i,
      /qué\s+es\s+esto\??/i,
      /qu['’]?est[-\s]?ce\s+que\s+c['’]?est\??/i,
      /was\s+ist\s+das\??/i,
      /che\s+cosa\s+(?:\u00e8|e)\??/i,
      /o\s+que\s+(?:\u00e9|e)\s+isso\??/i,
      /что\s+это\??/i,
      /這是甚麼\??/i,
      /這是什麼\??/i,
      /這\s*是\s*什麼\??/i,
      /これは何ですか\??/i
    ];

    function escapeRegExp(text) {
      return text.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
    }

    function coercePattern(pattern) {
      if (pattern instanceof RegExp) {
        return pattern;
      }

      if (typeof pattern === 'string' && pattern.trim().length > 0) {
        return new RegExp(escapeRegExp(pattern.trim()), 'i');
      }

      return null;
    }

    const HELP_TEXT_PATTERNS = (window.B2C_HELP_TEXT_PATTERNS || DEFAULT_HELP_TEXT_PATTERNS)
      .map(coercePattern)
      .filter(Boolean);

    function hideElements(selectors) {
      const uniqueSelectors = Array.from(new Set(selectors));
      uniqueSelectors.forEach(selector => {
        document.querySelectorAll(selector).forEach(element => {
          if (!element.parentNode) {
            return;
          }

          element.style.display = 'none';
          element.style.visibility = 'hidden';
          element.style.width = '0';
          element.style.height = '0';
          element.style.overflow = 'hidden';
          element.style.position = 'absolute';
          element.style.left = '-9999px';
          element.style.opacity = '0';
          element.style.pointerEvents = 'none';
          element.style.zIndex = '-9999';
          element.remove();
        });
      });
    }

    function hideParentElements(selectors) {
      selectors.forEach(selector => {
        document.querySelectorAll(selector).forEach(element => {
          const parent = element && element.parentNode;
          if (!parent) {
            return;
          }

          parent.style.display = 'none';
          parent.style.visibility = 'hidden';
          parent.style.width = '0';
          parent.style.height = '0';
          parent.style.overflow = 'hidden';
          parent.style.position = 'absolute';
          parent.style.left = '-9999px';
          parent.style.opacity = '0';
          parent.style.pointerEvents = 'none';
          parent.style.zIndex = '-9999';
          parent.remove();
        });
      });
    }

    function normalizeWhitespace(text) {
      return text.replace(/\s+/g, ' ').trim();
    }

    function textMatchesPatterns(text, patterns) {
      if (!text || !patterns.length) {
        return false;
      }

      const normalized = normalizeWhitespace(text);
      if (!normalized) {
        return false;
      }

      return patterns.some(pattern => pattern.test(normalized));
    }

    function removeTextNodesMatching(root, patterns) {
      if (!root) {
        return;
      }

      const walker = document.createTreeWalker(root, NodeFilter.SHOW_TEXT, null, false);
      const nodesToRemove = [];

      let current;
      while ((current = walker.nextNode())) {
        if (textMatchesPatterns(current.textContent, patterns)) {
          nodesToRemove.push(current);
        }
      }

      nodesToRemove.forEach(node => {
        if (node.parentNode) {
          node.parentNode.removeChild(node);
        }
      });
    }

    function removeHelpLinks() {
      try {
        hideElements(HELP_SELECTORS);
        hideParentElements(HELP_PARENT_SELECTORS);

        const api = document.getElementById('api');
        if (!api) {
          return;
        }

        api.querySelectorAll('*').forEach(element => {
          if (textMatchesPatterns(element.textContent, HELP_TEXT_PATTERNS)) {
            element.style.display = 'none';
            element.style.visibility = 'hidden';
            element.style.width = '0';
            element.style.height = '0';
            element.style.overflow = 'hidden';
            element.style.position = 'absolute';
            element.style.left = '-9999px';
            element.style.opacity = '0';
            element.style.pointerEvents = 'none';
            element.style.zIndex = '-9999';
            element.remove();
          }
        });

        hideParentElements(HELP_PARENT_SELECTORS);
        removeTextNodesMatching(api, HELP_TEXT_PATTERNS);
      } catch (e) {
        console.warn('Error removing help links:', e);
      }
    }
    
    // Unified JavaScript to handle both sign-in and sign-up
    function forceDarkTheme() {
      try {
        // Force background on all elements
        document.body.style.background = 'linear-gradient(135deg, #0b0f1a 0%, #0f172a 40%, #0f1c33 100%)';
        document.documentElement.style.background = 'linear-gradient(135deg, #0b0f1a 0%, #0f172a 40%, #0f1c33 100%)';
        
        // Force API container styling
        const api = document.getElementById('api');
        if (api) {
          api.style.background = 'rgba(17, 25, 40, 0.78)';
          api.style.backdropFilter = 'blur(18px)';
          api.style.border = '1px solid rgba(148, 163, 184, 0.18)';
          api.style.borderRadius = '16px';
          api.style.boxShadow = '0 18px 36px rgba(15, 23, 42, 0.32)';
          api.style.padding = '2.25rem';
          api.style.maxWidth = '420px';
          api.style.margin = '2.25rem auto';
          api.style.minHeight = 'auto';
          api.style.overflow = 'visible';
          api.style.maxHeight = 'none';
        }
        
        // Force all containers
        const containers = document.querySelectorAll('.ext-container, .ext-container-margin, .ext-container-padding, [class*="ext-"], [id*="ext-"]');
        containers.forEach(container => {
          container.style.background = 'linear-gradient(135deg, #0b0f1a 0%, #0f172a 40%, #0f1c33 100%)';
        });
        
        // Remove "What is this?" links
        removeHelpLinks();
        
        // Style any new form elements that B2C injects
        const inputs = document.querySelectorAll('#api input, #api select');
        inputs.forEach(input => {
          input.style.background = 'rgba(15, 23, 42, 0.55)';
          input.style.border = '1px solid rgba(148, 163, 184, 0.28)';
          input.style.borderRadius = '12px';
          input.style.color = '#f1f5f9';
          input.style.padding = '0.9rem 1rem';
          input.style.fontSize = '0.95rem';
          input.style.width = '100%';
          input.style.marginBottom = '1rem';
          input.style.boxShadow = 'none';
        });

        const checkboxes = document.querySelectorAll('#api input[type="checkbox"]');
        checkboxes.forEach(checkbox => {
          checkbox.style.width = '16px';
          checkbox.style.height = '16px';
          checkbox.style.margin = '0';
          checkbox.style.marginRight = '0.55rem';
          checkbox.style.border = '1px solid rgba(148, 163, 184, 0.35)';
          checkbox.style.borderRadius = '4px';
          checkbox.style.background = 'rgba(15, 23, 42, 0.45)';
        });

        checkboxes.forEach(checkbox => {
          const container = checkbox.closest('.form-group') || checkbox.parentElement;
          if (container && !container.dataset.alignedCheckbox) {
            container.style.display = 'grid';
            container.style.gridTemplateColumns = 'auto 1fr';
            container.style.alignItems = 'start';
            container.style.columnGap = '0.55rem';
            container.dataset.alignedCheckbox = 'true';
          }

          const label = container && container.querySelector('label');
          if (label) {
            label.style.margin = '0';
            label.style.lineHeight = '1.3';
            label.style.fontSize = '0.88rem';
          }
        });

        // Style any new buttons that B2C injects
        const buttons = document.querySelectorAll('#api button, #api input[type="submit"]');
        buttons.forEach(button => {
          button.style.background = 'linear-gradient(135deg, #6366f1 0%, #7c6cf7 100%)';
          button.style.border = '1px solid rgba(129, 140, 248, 0.7)';
          button.style.borderRadius = '12px';
          button.style.color = '#f8fafc';
          button.style.padding = '0.85rem 1.15rem';
          button.style.fontSize = '0.95rem';
          button.style.fontWeight = '600';
          button.style.width = '100%';
          button.style.cursor = 'pointer';
          button.style.marginTop = '1rem';
          button.style.marginBottom = '1rem';
          button.style.boxShadow = '0 6px 14px rgba(76, 81, 191, 0.25)';
          button.style.textTransform = 'none';
        });

      } catch (e) {
        console.warn('Theme force error:', e);
      }
    }
    
    function applyCustomizations() {
      forceDarkTheme();
      removeHelpLinks();
    }

    // Run immediately and on load
    applyCustomizations();
    window.addEventListener('load', applyCustomizations);

    // Watch for B2C content changes
    const observer = new MutationObserver(applyCustomizations);

    function tryObserveApi() {
      const api = document.getElementById('api');
      if (!api) {
        return false;
      }

      observer.observe(api, { childList: true, subtree: true });
      applyCustomizations();
      return true;
    }

    if (!tryObserveApi()) {
      const checkApi = setInterval(() => {
        if (tryObserveApi()) {
          clearInterval(checkApi);
        }
      }, 100);
    }
  
  </script>
</body>
</html>
